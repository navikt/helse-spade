<?xml version="1.0" encoding="UTF-8"?>
<configuration>
   <appender name="STDOUT_JSON" class="ch.qos.logback.core.ConsoleAppender">
      <encoder class="net.logstash.logback.encoder.LogstashEncoder" />
   </appender>

   <appender name="auditLogger" class="com.papertrailapp.logback.Syslog4jAppender">
      <layout class="ch.qos.logback.classic.PatternLayout">
         <pattern>%m%n%xEx</pattern>
      </layout>

      <syslogConfig class="org.productivity.java.syslog4j.impl.net.tcp.TCPNetSyslogConfig">
         <host>audit.nais</host>
         <port>6514</port>
         <ident>spade</ident>
         <maxMessageLength>128000</maxMessageLength>
      </syslogConfig>
   </appender>

   <logger name="io.ktor" level="TRACE" />

   <logger name="org.apache.kafka" level="TRACE" />

   <logger level="INFO" name="auditLogger" additivity="false">
      <appender-ref ref="auditLogger" />
   </logger>

   <root level="INFO">
      <appender-ref ref="STDOUT_JSON" />
   </root>

</configuration>
